---
import resume from "../assets/files/ryan-furrer-resume.pdf";
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import logoDark from "../../public/logo-dark-theme.svg";
---

<nav
  id="top"
  class="container mx-auto flex max-w-screen-xl items-center py-8 lg:py-12"
  aria-label="main navigation bar"
>
  <a
    aria-label="Go to website home"
    href="/"
    class="mr-auto text-2xl font-semibold lowercase text-zinc-900 hover:text-emerald-600 xl:text-3xl dark:text-zinc-50 dark:hover:text-emerald-400"
  >
    <Image class="aspect-square h-12 w-12" src={logoDark} alt="Logo" />
  </a>
  <ul id="navlist" class="flex gap-4">
    <li>
      <a
        class="flex items-center justify-end gap-1"
        href=`${resume}`
        target="_blank"
        rel="noopener noreferrer"
        aria-label="resume"
        >Resume<Icon class="m-0 p-0 text-xl" name="newtab" /></a
      >
    </li>
    <li>
      <a href="/projects" aria-label="projects">Projects</a>
    </li>
    <li>
      <a href="/blog" aria-label="blog">Blog</a>
    </li>
    <li><a href="/now" aria-label="now">Now</a></li>
    <li>
      <a href="/uses" aria-label="uses">Uses</a>
    </li>
    <li>
      <a href="/about" aria-label="about">About</a>
    </li>
    <li>
      <a href="/contact" aria-label="contact">Contact</a>
    </li>
  </ul>
  <button id="hamburger" name="Mobile Menu" aria-label="Mobile Menu">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>
</nav>

<style>
  #navlist {
    @apply fixed -right-full top-24 z-50 flex h-screen w-full flex-col gap-4 bg-white px-4 pt-8 text-right transition-[right] duration-300 ease-in-out lg:static lg:top-0 lg:h-auto lg:w-auto lg:flex-row lg:px-0 lg:py-0 dark:bg-black;
  }
  #navlist.active {
    @apply right-0;
  }

  #hamburger {
    @apply flex flex-col flex-wrap gap-[.38rem] border-none p-0 text-base lg:hidden;
  }

  .bar {
    @apply block h-[.125rem] w-[1.4rem] bg-zinc-500 lg:hidden dark:bg-zinc-400;
  }

  #hamburger.active .bar:nth-child(2) {
    @apply opacity-0;
  }

  #hamburger.active .bar:nth-child(1) {
    @apply translate-y-[.5rem] rotate-45 transition-transform ease-in-out;
  }

  #hamburger.active .bar:nth-child(3) {
    @apply -translate-y-[.5rem] -rotate-45 transition-transform ease-in-out;
  }

  li > a {
    @apply lowercase text-zinc-500 hover:text-emerald-600 dark:text-zinc-400 dark:hover:text-emerald-400;
  }
</style>

<script>
  function mobileMenu() {
    const hamburger = document.querySelector("#hamburger");
    const navList = document.querySelector("#navlist");

    hamburger.addEventListener("click", () => {
      hamburger.classList.toggle("active");
      navList.classList.toggle("active");
    });
  }

  function closeMenu() {
    const hamburger = document.querySelector("#hamburger");
    const navList = document.querySelector("#navlist");
    const navLink = document.querySelectorAll(".navlink");

    navLink.forEach((n) =>
      n.addEventListener("click", () => {
        hamburger.classList.remove("active");
        navList.classList.remove("active");
      }),
    );
  }

  closeMenu();
  mobileMenu();
</script>
